// ------------------ Init Storage ------------------
if (!localStorage.getItem("records")) {
    localStorage.setItem("records", JSON.stringify([]));
}

let records = JSON.parse(localStorage.getItem("records"));

// ------------------ Set Type ------------------
function setType(value) {
    document.getElementById("type").value = value;
}

// ------------------ Add New Record ------------------
const form = document.getElementById("record-form");

if (form) {
    form.addEventListener("submit", function (e) {
        e.preventDefault();

        let type = document.getElementById("type").value;
        let desc = document.getElementById("desc").value;
        let amount = parseFloat(document.getElementById("amount").value);
        let date = document.getElementById("date").value;

        let newRecord = {
            type: type,
            desc: desc,
            amount: amount,
            date: date
        };

        records.push(newRecord);
        localStorage.setItem("records", JSON.stringify(records));

        location.reload();
    });
}

// ------------------ Display Records + Balance ------------------
const tableBody = document.querySelector("#record-table tbody");

let balance = 0;

if (tableBody) {
    records.forEach(r => {
        if (r.type === "income") {
            balance += r.amount;
        } else {
            balance -= r.amount;
        }

        let row = document.createElement("tr");
        row.innerHTML = `
            <td>${r.type}</td>
            <td>${r.desc}</td>
            <td>${r.amount.toFixed(2)}</td>
            <td>${r.date}</td>
        `;
        tableBody.appendChild(row);
    });
}

console.log("Current Balance:", balance);
